<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Archived Activities</title>
    <link rel="stylesheet" href="/activities.css">
</head>
<body>
    <h1>Archived Content</h1>
    <div class="dropdown-content">
        <a href="/admin/activities/<%= roomId %>">Go Back</a>
        <a href="/logout">Logout</a>
    </div>

    <!-- Select between archived activity rooms and quizzes -->
    <div class="form-group">
        <label for="archiveSelect">Archived Option</label>
        <select class="form-control" id="archiveSelect" name="archiveSelect" onchange="loadArchivedContent()">
            <option value="activityRooms">Archived Activity Rooms</option>
            <option value="tests">Archived Tests</option>
        </select>
    </div>

    <!-- Display Archived Activity Rooms -->
    <div id="archivedActivityRooms">
        <h2>Archived Activity Rooms</h2>
        <% if (archivedActivityRooms && archivedActivityRooms.length > 0) { %>
            <ul>
                <% archivedActivityRooms.forEach(activityRoom => { %>
                    <li>
                        <strong><%= activityRoom.subject %></strong> - <%= activityRoom.activityType %>
                        <button onclick="unarchiveActivityRoom('<%= activityRoom._id %>')">Unarchive</button>
                    </li>
                <% }); %>
            </ul>
        <% } else { %>
            <p>No archived activity rooms available.</p>
        <% } %>
    </div>

    <!-- Display Archived Tests -->
  <!-- Display Archived Tests -->
<div id="archivedTests" style="display: none;">
   

    <h2>Archived Tests</h2>
    <% if (archivedQuizzes && archivedQuizzes.length > 0) { %>
        <ul class="list-group">
            <% archivedQuizzes.forEach(quiz => { %>
                <li class="list-group-item">
                    <strong><%= quiz.title %></strong>
                    <p>Archived on: <%= new Date(quiz.archivedAt).toLocaleString() %></p>
                    <button onclick="unarchiveQuiz('<%= quiz._id %>')">Unarchive</button>
                </li>
            <% }) %>
        </ul>
    <% } else { %>
        <p>No archived quizzes available.</p>
    <% } %>
</div>


<script>
  function loadArchivedContent() {
    const selectedOption = document.getElementById("archiveSelect").value;
    document.getElementById("archivedActivityRooms").style.display = selectedOption === "activityRooms" ? "block" : "none";
    document.getElementById("archivedTests").style.display = selectedOption === "tests" ? "block" : "none";
}


    function unarchiveActivityRoom(activityRoomId) {
        fetch(`/admin/unarchive-activity-room/${activityRoomId}`, { method: 'POST' })
            .then(response => response.json())
            .then(data => {
                alert(data.message);
                window.location.reload();
            })
            .catch(error => console.error('Error unarchiving activity room:', error));
    }

    function unarchiveQuiz(quizId) {
        fetch(`/admin/unarchive-quiz/${quizId}`, { method: 'POST' })
            .then(response => response.json())
            .then(data => {
                alert(data.message);
                window.location.reload();
            })
            .catch(error => console.error('Error unarchiving quiz:', error));
    }
</script>
</body>
</html>
